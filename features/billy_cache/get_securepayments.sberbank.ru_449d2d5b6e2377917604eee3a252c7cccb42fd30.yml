---
:scope: 
:url: https://securepayments.sberbank.ru/payment/js/jquery.payment.js
:body: ''
:status: 200
:method: get
:headers:
  Server: nginx/1.6.0
  Date: Wed, 01 Oct 2014 12:24:17 GMT
  Content-Type: application/x-javascript
  Content-Length: '28108'
  Last-Modified: Thu, 26 Jun 2014 13:35:03 GMT
  Connection: close
  ETag: '"53ac2187-6dcc"'
  Accept-Ranges: bytes
:content: !binary |-
  LyoqCiAqIFBheW1lbnQgcGFnZSB1bml2ZXJzYWwgaGFuZGxlcgogKi8KKGZ1
  bmN0aW9uICgkKSB7CgogICAgdmFyIHNldHRpbmdzID0gewogICAgICAgIC8v
  IG5hbWUgZm9yIG9yZGVySWQgcGFyYW1ldGVyCiAgICAgICAgb3JkZXJJZFBh
  cmFtOiJtZE9yZGVyIiwKICAgICAgICBsYW5ndWFnZToicnUiLAoKICAgICAg
  ICAvLyBvcmRlckRldGFpbHMKICAgICAgICBvcmRlcklkOiJvcmRlck51bWJl
  ciIsCiAgICAgICAgYW1vdW50OiJhbW91bnQiLAogICAgICAgIGJvbnVzQW1v
  dW50OiJib251c0Ftb3VudCIsCiAgICAgICAgYm9udXNCbG9jazoiYm9udXNC
  bG9jayIsCiAgICAgICAgZGVzY3JpcHRpb246ImRlc2NyaXB0aW9uIiwKCiAg
  ICAgICAgcGF5bWVudEZvcm1JZDoiZm9ybVBheW1lbnQiLAogICAgICAgIGFj
  c0Zvcm1JZDoiYWNzIiwKCiAgICAgICAgcGFuSW5wdXRJZDoiaVBBTiIsCiAg
  ICAgICAgcGFuMUlucHV0SWQ6InBhbjEiLAogICAgICAgIHBhbjJJbnB1dElk
  OiJwYW4yIiwKICAgICAgICBwYW4zSW5wdXRJZDoicGFuMyIsCiAgICAgICAg
  cGFuNElucHV0SWQ6InBhbjQiLAogICAgICAgIHllYXJTZWxlY3RJZDoieWVh
  ciIsCiAgICAgICAgY3VycmVudFllYXI6KG5ldyBEYXRlKS5nZXRGdWxsWWVh
  cigpLAogICAgICAgIG1vbnRoU2VsZWN0SWQ6Im1vbnRoIiwKICAgICAgICBj
  YXJkaG9sZGVySW5wdXRJZDoiaVRFWFQiLAogICAgICAgIGN2Y0lucHV0SWQ6
  ImlDVkMiLAogICAgICAgIGVtYWlsSW5wdXRJZDoiZW1haWwiLAoKICAgICAg
  ICBwYXJhbVByZWZpeDoicGFyYW0uIiwKICAgICAgICBwYWdlVmlldzokLnVy
  bC5wYXJhbSgncGFnZVZpZXcnKSwKCiAgICAgICAgcGF5bWVudEFjdGlvbjoi
  Li4vLi4vcmVzdC9wcm9jZXNzZm9ybS5kbyIsCiAgICAgICAgcGF5bWVudEJp
  bmRpbmdBY3Rpb246Ii4uLy4uL3Jlc3QvcHJvY2Vzc0JpbmRpbmdGb3JtLmRv
  IiwKICAgICAgICBnZXRTZXNzaW9uU3RhdHVzQWN0aW9uOiIuLi8uLi9yZXN0
  L2dldFNlc3Npb25TdGF0dXMuZG8iLAogICAgICAgIGlzTWFlc3Ryb0NhcmRB
  Y3Rpb246Ii4uLy4uL3Jlc3QvaXNNYWVzdHJvQ2FyZC5kbyIsCiAgICAgICAg
  c2hvd0Vycm9yQWN0aW9uOiIuLi8uLi9yZXN0L3Nob3dFcnJvcnMuZG8iLAoK
  ICAgICAgICBtZXNzYWdlQWpheEVycm9yOiLQodC10YDQstC40YEg0LLRgNC1
  0LzQtdC90L3QviDQvdC10LTQvtGB0YLRg9C/0LXQvS4g0J/QvtC/0YDQvtCx
  0YPQudGC0LUg0L/QvtC30LTQvdC10LUuIiwKICAgICAgICBtZXNzYWdlVGlt
  ZVJlbWFpbmluZzoi0JTQviDQvtC60L7QvdGH0LDQvdC40Y8g0YHQtdGB0YHQ
  uNC4INC+0YHRgtCw0LvQvtGB0YwgI01JTiM6I1NFQyMiLAogICAgICAgIG1l
  c3NhZ2VSZWRpcmVjdGluZzoi0J/QtdGA0LXQsNC00YDQtdGB0LDRhtC40Y8u
  Li4iLAoKICAgICAgICB1cGRhdGVQYWdlOmZ1bmN0aW9uIChkYXRhKSB7CiAg
  ICAgICAgICAgICQoIiMiICsgc2V0dGluZ3Mub3JkZXJJZCkudGV4dChkYXRh
  W3NldHRpbmdzLm9yZGVySWRdKTsKICAgICAgICAgICAgJCgiIyIgKyBzZXR0
  aW5ncy5hbW91bnQpLnRleHQoZGF0YVtzZXR0aW5ncy5hbW91bnRdKTsKICAg
  ICAgICAgICAgJCgiIyIgKyBzZXR0aW5ncy5kZXNjcmlwdGlvbikudGV4dChk
  YXRhW3NldHRpbmdzLmRlc2NyaXB0aW9uXSk7CiAgICAgICAgICAgIGlmIChk
  YXRhW3NldHRpbmdzLmJvbnVzQW1vdW50XSA+IDApIHsKICAgICAgICAgICAg
  ICAgICQoIiMiICsgc2V0dGluZ3MuYm9udXNCbG9jaykuc2hvdygpOwogICAg
  ICAgICAgICAgICAgJCgiIyIgKyBzZXR0aW5ncy5ib251c0Ftb3VudCkudGV4
  dChkYXRhW3NldHRpbmdzLmJvbnVzQW1vdW50IF0gLyAxMDApOwogICAgICAg
  ICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgiIyIgKyBzZXR0aW5n
  cy5ib251c0Jsb2NrKS5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9
  CiAgICB9OwoKICAgIHZhciBwcm9wZXJ0aWVzID0gewogICAgICAgIG9yZGVy
  SWQ6bnVsbCwKICAgICAgICBleHBpcmVkOmZhbHNlCiAgICB9OwoKICAgIHZh
  ciBtZXRob2RzID0gewogICAgICAgIG1hZXN0cm9DaGVjazp7CiAgICAgICAg
  ICAgIHBhbjoiIiwKICAgICAgICAgICAgcmVzdWx0OmZhbHNlCiAgICAgICAg
  fSwKCiAgICAgICAgaW5pdDpmdW5jdGlvbiAob3B0aW9ucykgewogICAgICAg
  ICAgICBpZiAob3B0aW9ucykgewogICAgICAgICAgICAgICAgJC5leHRlbmQo
  c2V0dGluZ3MsIG9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICAg
  IHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAg
  ICAgJCh0aGlzKS5yZWFkeShtZXRob2RzLmZpbGxDb250cm9scyk7CiAgICAg
  ICAgICAgICAgICAvL21ldGhvZHMuYmluZENvbnRyb2xzKCk7CiAgICAgICAg
  ICAgICAgICAvLyBpbml0IGRhdGEKICAgICAgICAgICAgICAgIHZhciBvcmRl
  cklkID0gJC51cmwucGFyYW0oc2V0dGluZ3Mub3JkZXJJZFBhcmFtKTsKICAg
  ICAgICAgICAgICAgIGlmICghb3JkZXJJZCkgewogICAgICAgICAgICAgICAg
  ICAgICQodGhpcykubG9nKCJVbmtub3duIG9yZGVyIiwgImVycm9yIik7CiAg
  ICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQog
  ICAgICAgICAgICAgICAgcHJvcGVydGllcy5vcmRlcklkID0gb3JkZXJJZDsK
  ICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuZXhwaXJlZCA9IGZhbHNlOwog
  ICAgICAgICAgICAgICAgbWV0aG9kcy5nZXRTZXNzaW9uU3RhdHVzKHRydWUp
  OwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGNoZWNrQ29u
  dHJvbDpmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICBpZiAoJChuYW1l
  KS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Fic2Vu
  dCAnICsgbmFtZSArICcgLiBQbGVhc2UsIGNoZWNrIGRvY3VtZW50YXRpb24g
  b3IgdGVtcGxhdGUgcGFnZScpOwogICAgICAgICAgICB9CiAgICAgICAgfSwK
  ICAgICAgICBjaGVja0NvbnRyb2xzOmZ1bmN0aW9uICgpIHsKICAgICAgICAg
  ICAgbWV0aG9kcy5jaGVja0NvbnRyb2woJyMnICsgc2V0dGluZ3MucGF5bWVu
  dEZvcm1JZCk7CiAgICAgICAgICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCIj
  IiArIHNldHRpbmdzLnBhbklucHV0SWQpOwogICAgICAgICAgICBtZXRob2Rz
  LmNoZWNrQ29udHJvbCgiIyIgKyBzZXR0aW5ncy5jYXJkaG9sZGVySW5wdXRJ
  ZCk7CiAgICAgICAgICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCIjIiArIHNl
  dHRpbmdzLmN2Y0lucHV0SWQpOwoKICAgICAgICAgICAgbWV0aG9kcy5jaGVj
  a0NvbnRyb2woIiMiICsgc2V0dGluZ3MueWVhclNlbGVjdElkKTsKICAgICAg
  ICAgICAgbWV0aG9kcy5jaGVja0NvbnRyb2woIiMiICsgc2V0dGluZ3MubW9u
  dGhTZWxlY3RJZCk7CgogICAgICAgICAgICBtZXRob2RzLmNoZWNrQ29udHJv
  bCgnIycgKyBzZXR0aW5ncy5vcmRlcklkKTsKICAgICAgICAgICAgbWV0aG9k
  cy5jaGVja0NvbnRyb2woJyMnICsgc2V0dGluZ3MuYW1vdW50KTsKCiAgICAg
  ICAgICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCcjYnV0dG9uUGF5bWVudCcp
  OwogICAgICAgICAgICBtZXRob2RzLmNoZWNrQ29udHJvbCgnIycgKyBzZXR0
  aW5ncy5vcmRlcklkUGFyYW0pOwogICAgICAgICAgICBtZXRob2RzLmNoZWNr
  Q29udHJvbCgnIycgKyBzZXR0aW5ncy5hY3NGb3JtSWQpOwogICAgICAgICAg
  ICBtZXRob2RzLmNoZWNrQ29udHJvbCgnI2xvY2F0aW9uJyk7CiAgICAgICAg
  ICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCcjZXhwaXJ5Jyk7CiAgICAgICAg
  ICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCcjbGFuZ3VhZ2UnKTsKICAgICAg
  ICAgICAgbWV0aG9kcy5jaGVja0NvbnRyb2woJyNlcnJvckJsb2NrJyk7CiAg
  ICAgICAgICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCcjbnVtYmVyQ291bnRk
  b3duJyk7CiAgICAgICAgICAgIG1ldGhvZHMuY2hlY2tDb250cm9sKCcjaW5m
  b0Jsb2NrJyk7CiAgICAgICAgfSwKICAgICAgICBiaW5kQ29udHJvbHM6ZnVu
  Y3Rpb24gKCkgewogICAgICAgICAgICBtZXRob2RzLmNoZWNrQ29udHJvbHMo
  KTsKICAgICAgICAgICAgJCgnIycgKyBzZXR0aW5ncy5wYXltZW50Rm9ybUlk
  KS5iaW5kKCdzdWJtaXQucGF5bWVudCcsIG1ldGhvZHMub25TdWJtaXQpOwog
  ICAgICAgICAgICAkKCIjIiArIHNldHRpbmdzLnBhbklucHV0SWQpLmJpbmQo
  J2tleXVwLnBheW1lbnQnLCBtZXRob2RzLnZhbGlkYXRlKTsKICAgICAgICAg
  ICAgJCgiIyIgKyBzZXR0aW5ncy5jYXJkaG9sZGVySW5wdXRJZCkuYmluZCgn
  a2V5dXAucGF5bWVudCcsIG1ldGhvZHMudmFsaWRhdGUpOwogICAgICAgICAg
  ICAkKCIjIiArIHNldHRpbmdzLmN2Y0lucHV0SWQpLmJpbmQoJ2tleXVwLnBh
  eW1lbnQnLCBtZXRob2RzLnZhbGlkYXRlKTsKCiAgICAgICAgICAgICQoIiMi
  ICsgc2V0dGluZ3MueWVhclNlbGVjdElkKS5iaW5kKCdjaGFuZ2UucGF5bWVu
  dCcsIG1ldGhvZHMudmFsaWRhdGUpOwogICAgICAgICAgICAkKCIjIiArIHNl
  dHRpbmdzLm1vbnRoU2VsZWN0SWQpLmJpbmQoJ2NoYW5nZS5wYXltZW50Jywg
  bWV0aG9kcy52YWxpZGF0ZSk7CgogICAgICAgICAgICAkKCcjJyArIHNldHRp
  bmdzLnBhbklucHV0SWQpLmJpbmQoJ2tleXByZXNzLnBheW1lbnQnLCBtZXRo
  b2RzLmNoZWNrTnVtYmVySW5wdXQpOwogICAgICAgICAgICAkKCcjJyArIHNl
  dHRpbmdzLnBhbjFJbnB1dElkKS5iaW5kKCdrZXlwcmVzcy5wYXltZW50Jywg
  bWV0aG9kcy5jaGVja051bWJlcklucHV0KTsKICAgICAgICAgICAgJCgnIycg
  KyBzZXR0aW5ncy5wYW4xSW5wdXRJZCkuYmluZCgncGFzdGUucGF5bWVudCcs
  IG1ldGhvZHMuY2hlY2tOdW1iZXJJbnB1dCk7CiAgICAgICAgICAgICQoJyMn
  ICsgc2V0dGluZ3MucGFuMklucHV0SWQpLmJpbmQoJ2tleXByZXNzLnBheW1l
  bnQnLCBtZXRob2RzLmNoZWNrTnVtYmVySW5wdXQpOwogICAgICAgICAgICAk
  KCcjJyArIHNldHRpbmdzLnBhbjJJbnB1dElkKS5iaW5kKCdwYXN0ZS5wYXlt
  ZW50JywgbWV0aG9kcy5jaGVja051bWJlcklucHV0KTsKICAgICAgICAgICAg
  JCgnIycgKyBzZXR0aW5ncy5wYW4zSW5wdXRJZCkuYmluZCgna2V5cHJlc3Mu
  cGF5bWVudCcsIG1ldGhvZHMuY2hlY2tOdW1iZXJJbnB1dCk7CiAgICAgICAg
  ICAgICQoJyMnICsgc2V0dGluZ3MucGFuM0lucHV0SWQpLmJpbmQoJ3Bhc3Rl
  LnBheW1lbnQnLCBtZXRob2RzLmNoZWNrTnVtYmVySW5wdXQpOwogICAgICAg
  ICAgICAkKCcjJyArIHNldHRpbmdzLnBhbjRJbnB1dElkKS5iaW5kKCdrZXlw
  cmVzcy5wYXltZW50JywgbWV0aG9kcy5jaGVja051bWJlcklucHV0KQogICAg
  ICAgICAgICAkKCcjJyArIHNldHRpbmdzLnBhbjRJbnB1dElkKS5iaW5kKCdw
  YXN0ZS5wYXltZW50JywgbWV0aG9kcy5jaGVja051bWJlcklucHV0KTsKICAg
  ICAgICAgICAgOwogICAgICAgICAgICAkKCcjJyArIHNldHRpbmdzLmN2Y0lu
  cHV0SWQpLmJpbmQoJ2tleXByZXNzLnBheW1lbnQnLCBtZXRob2RzLmNoZWNr
  TnVtYmVySW5wdXQpOwogICAgICAgICAgICAkKCcjJyArIHNldHRpbmdzLmN2
  Y0lucHV0SWQpLmJpbmQoJ3Bhc3RlLnBheW1lbnQnLCBtZXRob2RzLmNoZWNr
  TnVtYmVySW5wdXQpOwogICAgICAgICAgICAkKCcjJyArIHNldHRpbmdzLmNh
  cmRob2xkZXJJbnB1dElkKS5iaW5kKCdrZXlwcmVzcy5wYXltZW50JywgbWV0
  aG9kcy5jaGVja05hbWVJbnB1dCk7CiAgICAgICAgICAgICQoJyMnICsgc2V0
  dGluZ3MuY2FyZGhvbGRlcklucHV0SWQpLmJpbmQoJ3Bhc3RlLnBheW1lbnQn
  LCBtZXRob2RzLmNoZWNrTmFtZUlucHV0KTsKCiAgICAgICAgICAgICQoJyNi
  dXR0b25QYXltZW50JykuYmluZCgnY2xpY2sucGF5bWVudCcsIG1ldGhvZHMu
  ZG9TdWJtaXRGb3JtKTsKICAgICAgICAgICAgJCgnI2J1dHRvblBheW1lbnQn
  KS5hdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7CiAgICAgICAgICAgICQoJyNi
  dXR0b25QYXltZW50U2JyZicpLmJpbmQoJ2NsaWNrLnBheW1lbnQnLCBtZXRo
  b2RzLmRvU3VibWl0Rm9ybVNicmYpOwogICAgICAgIH0sCiAgICAgICAgZmls
  bENvbnRyb2xzOmZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbWV0aG9kcy5i
  aW5kQ29udHJvbHMoKTsKICAgICAgICAgICAgJCgnIycgKyBzZXR0aW5ncy55
  ZWFyU2VsZWN0SWQpLmVtcHR5KCk7CiAgICAgICAgICAgIHZhciB5ZWFyID0g
  c2V0dGluZ3MuY3VycmVudFllYXI7CiAgICAgICAgICAgIHdoaWxlICh5ZWFy
  IDwgc2V0dGluZ3MuY3VycmVudFllYXIgKyAyMSkgewogICAgICAgICAgICAg
  ICAgdmFyIG9wdGlvbiA9ICI8b3B0aW9uIHZhbHVlPSIgKyB5ZWFyICsgIj4i
  ICsgeWVhciArICI8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgJCgnIycg
  KyBzZXR0aW5ncy55ZWFyU2VsZWN0SWQpLmFwcGVuZCgkKG9wdGlvbikpOwog
  ICAgICAgICAgICAgICAgeWVhcisrOwogICAgICAgICAgICB9CiAgICAgICAg
  fSwKICAgICAgICBjaGVja051bWJlcklucHV0OmZ1bmN0aW9uIChldmVudCkg
  ewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAg
  ICAgICAgICAgIHZhciBlbGVtID0gJChldmVudC50YXJnZXQpOwogICAgICAg
  ICAgICAgICAgZWxlbS52YWwoZWxlbS52YWwoKS5yZXBsYWNlKC9cRC9nLCAi
  IikpOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICB9LAogICAgICAgIGNo
  ZWNrTmFtZUlucHV0OmZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBz
  ZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBl
  bGVtID0gJChldmVudC50YXJnZXQpOwogICAgICAgICAgICAgICAgZWxlbS52
  YWwoZWxlbS52YWwoKS5yZXBsYWNlKC9bXmEtekEtWiAnIFwtYC5dL2csICIi
  KSk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgIH0sCiAgICAgICAgb25T
  dWJtaXQ6ZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LnBy
  ZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIG1ldGhvZHMuc2VuZFBheW1l
  bnQoKTsKICAgICAgICB9LAogICAgICAgIGRvU3VibWl0Rm9ybVNicmY6ZnVu
  Y3Rpb24gKCkgewogICAgICAgICAgICBtZXRob2RzLnNlbmRQYXltZW50U2Jy
  ZigpOwogICAgICAgIH0sCiAgICAgICAgc3dpdGNoQWN0aW9uczpmdW5jdGlv
  biAoaXNFbmFibGVkKSB7CiAgICAgICAgICAgICQoJyNidXR0b25QYXltZW50
  JykuYXR0cignZGlzYWJsZWQnLCAhaXNFbmFibGVkKTsKICAgICAgICB9LAog
  ICAgICAgIGRvU3VibWl0Rm9ybTpmdW5jdGlvbiAoKSB7CiAgICAgICAgICAg
  IGlmICghbWV0aG9kcy52YWxpZGF0ZSgpKQogICAgICAgICAgICAgICAgcmV0
  dXJuOwogICAgICAgICAgICAkKCcjZXhwaXJ5JykudmFsKCQoIiMiICsgc2V0
  dGluZ3MueWVhclNlbGVjdElkKS52YWwoKSArICQoIiMiICsgc2V0dGluZ3Mu
  bW9udGhTZWxlY3RJZCkudmFsKCkpOwogICAgICAgICAgICBtZXRob2RzLnN3
  aXRjaEFjdGlvbnMoZmFsc2UpOwogICAgICAgICAgICAkKCcjZm9ybVBheW1l
  bnQnKS5zdWJtaXQoKTsKICAgICAgICB9LAogICAgICAgIHZhbGlkYXRlOmZ1
  bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgnI2Vycm9yQmxvY2snKS5lbXB0
  eSgpOwogICAgICAgICAgICB2YXIgaXNWYWxpZCA9IHRydWU7CiAgICAgICAg
  ICAgIHZhciBpc1BhblZhbGlkID0gZmFsc2U7CgogICAgICAgICAgICBpZiAo
  IS8oXHMqXHcrXHMqKChcLnwnfC0pfFxzK3wkKSl7MSx9Ly50ZXN0KCQoJyMn
  ICsgc2V0dGluZ3MuY2FyZGhvbGRlcklucHV0SWQpLnZhbCgpKSkgewogICAg
  ICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOwogICAgICAgICAgICAgICAg
  JCgnIycgKyBzZXR0aW5ncy5jYXJkaG9sZGVySW5wdXRJZCArICctdmFsaWRh
  dGlvbicpLmF0dHIoJ2NsYXNzJywgJ2xvZ2luLWludmFsaWQnKTsKICAgICAg
  ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoJyMnICsgc2V0dGlu
  Z3MuY2FyZGhvbGRlcklucHV0SWQgKyAnLXZhbGlkYXRpb24nKS5hdHRyKCdj
  bGFzcycsICdsb2dpbi12YWxpZCcpOwogICAgICAgICAgICB9CgogICAgICAg
  ICAgICBpZiAoIS9eXGR7MTIsMTl9JC8udGVzdCgkKCcjJyArIHNldHRpbmdz
  LnBhbklucHV0SWQpLnZhbCgpKSB8fAogICAgICAgICAgICAgICAgIWx1aG4o
  JCgnIycgKyBzZXR0aW5ncy5wYW5JbnB1dElkKS52YWwoKSkgfHwKICAgICAg
  ICAgICAgICAgICQoJyMnICsgc2V0dGluZ3MucGFuMUlucHV0SWQpLmxlbmd0
  aCA+IDAgJiYgJCgnIycgKyBzZXR0aW5ncy5wYW4xSW5wdXRJZCkudmFsKCku
  bGVuZ3RoICE9IDQgfHwKICAgICAgICAgICAgICAgICQoJyMnICsgc2V0dGlu
  Z3MucGFuMklucHV0SWQpLmxlbmd0aCA+IDAgJiYgJCgnIycgKyBzZXR0aW5n
  cy5wYW4ySW5wdXRJZCkudmFsKCkubGVuZ3RoICE9IDQgfHwKICAgICAgICAg
  ICAgICAgICQoJyMnICsgc2V0dGluZ3MucGFuM0lucHV0SWQpLmxlbmd0aCA+
  IDAgJiYgJCgnIycgKyBzZXR0aW5ncy5wYW4zSW5wdXRJZCkudmFsKCkubGVu
  Z3RoICE9IDQpIHsKICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsK
  ICAgICAgICAgICAgICAgIGlzUGFuVmFsaWQgPSBmYWxzZTsKICAgICAgICAg
  ICAgICAgICQoJyMnICsgc2V0dGluZ3MucGFuSW5wdXRJZCArICctdmFsaWRh
  dGlvbicpLmF0dHIoJ2NsYXNzJywgJ2xvZ2luLWludmFsaWQnKTsKICAgICAg
  ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoJyMnICsgc2V0dGlu
  Z3MucGFuSW5wdXRJZCArICctdmFsaWRhdGlvbicpLmF0dHIoJ2NsYXNzJywg
  J2xvZ2luLXZhbGlkJyk7CiAgICAgICAgICAgICAgICBpc1BhblZhbGlkID0g
  dHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gY2hlY2sgaWYg
  Y2FyZCBleHBpcmF0aW9uIGRhdGUKICAgICAgICAgICAgdmFyIGRhdGVOb3cg
  PSBuZXcgRGF0ZSgpOwogICAgICAgICAgICB2YXIgY2FyZERhdGUgPSBuZXcg
  RGF0ZSgpOwogICAgICAgICAgICBjYXJkRGF0ZS5zZXRZZWFyKCQoJyMnICsg
  c2V0dGluZ3MueWVhclNlbGVjdElkKS52YWwoKSk7CiAgICAgICAgICAgIGNh
  cmREYXRlLnNldE1vbnRoKCQoJyMnICsgc2V0dGluZ3MubW9udGhTZWxlY3RJ
  ZCkudmFsKCkgLSAxKTsKICAgICAgICAgICAgaWYgKGRhdGVOb3cuZ2V0VGlt
  ZSgpID4gY2FyZERhdGUuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICAk
  KCcjJyArIHNldHRpbmdzLnllYXJTZWxlY3RJZCArICctdmFsaWRhdGlvbicp
  LmF0dHIoJ2NsYXNzJywgJ2xvZ2luLWludmFsaWQnKTsKICAgICAgICAgICAg
  ICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAg
  ICAgICAgICAgICAgICQoJyMnICsgc2V0dGluZ3MueWVhclNlbGVjdElkICsg
  Jy12YWxpZGF0aW9uJykuYXR0cignY2xhc3MnLCAnbG9naW4tdmFsaWQnKTsK
  ICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuZXhwaXJlZCkg
  ewogICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOwogICAgICAgICAg
  ICB9CgogICAgICAgICAgICBpZiAoaXNQYW5WYWxpZCkgewogICAgICAgICAg
  ICAgICAgaWYgKC9eKDUwfDVbNi04XXw2WzAtOV0pLiokLy50ZXN0KCQoJyMn
  ICsgc2V0dGluZ3MucGFuSW5wdXRJZCkudmFsKCkpKSB7CiAgICAgICAgICAg
  ICAgICAgICAgdmFyIGlzTWFlc3RybyA9IG1ldGhvZHMuaXNNYWVzdHJvQ2Fy
  ZCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChpc01hZXN0cm8gPT0gdW5k
  ZWZpbmVkKSB7IC8vINCR0YvQuyDQstGL0LfQvtCyIEFKQVggPT4g0Y3RgtC+
  INC90LUgc3VibWl0INC4INGA0LXQt9GD0LvRjNGC0LDRgiwg0LLQvtC30LLR
  gNCw0YnQsNC10LzRi9C5IHZhbGlkYXRlKCksINC90LUg0L3Rg9C20LXQvSwg
  0LAg0L7RgdGC0LDQstGI0LDRj9GB0Y8g0LLQsNC70LjQtNCw0YbQuNGPINCy
  0YvQv9C+0LvQvdC40LvQsNGB0Ywg0LIgaXNNYWVzdHJvQ2FyZCgpLgogICAg
  ICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAg
  ICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYWVzdHJvKSB7IC8v
  IEFKQVgg0LLRi9C30L7QstCwINC90LUg0LHRi9C70L4sINCy0LXRgNC90YPQ
  u9C+0YHRjCDQt9Cw0L/QvtC80L3QtdC90L3QvtC1INC30L3QsNGH0LXQvdC4
  0LUuINCf0YDQvtC00L7Qu9C20LjQvCDQstCw0LvQuNC00LDRhtC40Y4uCiAg
  ICAgICAgICAgICAgICAgICAgICAgICQoIiNjdmNNZXNzYWdlIikuc2hvdygp
  OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgkKCcjJyArIHNldHRp
  bmdzLmN2Y0lucHV0SWQpLnZhbCgpID09ICIiIHx8IC9eXGR7Myw0fSQvLnRl
  c3QoJCgnIycgKyBzZXR0aW5ncy5jdmNJbnB1dElkKS52YWwoKSkpKSB7IC8v
  INCt0YLQviDQnNCw0Y3RgdGC0YDQvi4KICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICQoJyMnICsgc2V0dGluZ3MuY3ZjSW5wdXRJZCArICctdmFsaWRh
  dGlvbicpLmF0dHIoJ2NsYXNzJywgJ2xvZ2luLWludmFsaWQnKTsKICAgICAg
  ICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICQoJyMnICsgc2V0dGluZ3MuY3ZjSW5wdXRJZCArICctdmFs
  aWRhdGlvbicpLmF0dHIoJ2NsYXNzJywgJ2xvZ2luLXZhbGlkJyk7CiAgICAg
  ICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVs
  c2UgeyAvLyDQndC1INCc0LDRjdGB0YLRgNC+LgogICAgICAgICAgICAgICAg
  ICAgICAgICAkKCIjY3ZjTWVzc2FnZSIpLmhpZGUoKTsKICAgICAgICAgICAg
  ICAgICAgICAgICAgaWYgKCEvXlxkezMsNH0kLy50ZXN0KCQoJyMnICsgc2V0
  dGluZ3MuY3ZjSW5wdXRJZCkudmFsKCkpKSB7CiAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAkKCcjJyArIHNldHRpbmdzLmN2Y0lucHV0SWQgKyAnLXZh
  bGlkYXRpb24nKS5hdHRyKCdjbGFzcycsICdsb2dpbi1pbnZhbGlkJyk7CiAg
  ICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAkKCcjJyArIHNldHRpbmdzLmN2Y0lucHV0SWQgKyAn
  LXZhbGlkYXRpb24nKS5hdHRyKCdjbGFzcycsICdsb2dpbi12YWxpZCcpOwog
  ICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAg
  fQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8g0JLQvtC+0LHRidC1INC9
  0LUg0JzQsNGN0YHRgtGA0L4uCiAgICAgICAgICAgICAgICAgICAgJCgiI2N2
  Y01lc3NhZ2UiKS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEv
  XlxkezMsNH0kLy50ZXN0KCQoJyMnICsgc2V0dGluZ3MuY3ZjSW5wdXRJZCku
  dmFsKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBm
  YWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBzZXR0aW5n
  cy5jdmNJbnB1dElkICsgJy12YWxpZGF0aW9uJykuYXR0cignY2xhc3MnLCAn
  bG9naW4taW52YWxpZCcpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7
  CiAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgc2V0dGluZ3MuY3Zj
  SW5wdXRJZCArICctdmFsaWRhdGlvbicpLmF0dHIoJ2NsYXNzJywgJ2xvZ2lu
  LXZhbGlkJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
  ICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYg
  KCEvXlxkezMsNH0kLy50ZXN0KCQoJyMnICsgc2V0dGluZ3MuY3ZjSW5wdXRJ
  ZCkudmFsKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZh
  bHNlOwogICAgICAgICAgICAgICAgICAgICQoJyMnICsgc2V0dGluZ3MuY3Zj
  SW5wdXRJZCArICctdmFsaWRhdGlvbicpLmF0dHIoJ2NsYXNzJywgJ2xvZ2lu
  LWludmFsaWQnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg
  ICAgICAgICAgICAgJCgnIycgKyBzZXR0aW5ncy5jdmNJbnB1dElkICsgJy12
  YWxpZGF0aW9uJykuYXR0cignY2xhc3MnLCAnbG9naW4tdmFsaWQnKTsKICAg
  ICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWV0
  aG9kcy5zd2l0Y2hBY3Rpb25zKGlzVmFsaWQpOwogICAgICAgICAgICByZXR1
  cm4gaXNWYWxpZDsKICAgICAgICB9LAogICAgICAgIHNob3dQcm9ncmVzczpm
  dW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQoJyNlcnJvckJsb2NrJykuZW1w
  dHkoKTsKICAgICAgICAgICAgJCgnI2luZGljYXRvcicpLnNob3coKTsKICAg
  ICAgICB9LAogICAgICAgIGhpZGVQcm9ncmVzczpmdW5jdGlvbiAoKSB7CiAg
  ICAgICAgICAgICQoJyNpbmRpY2F0b3InKS5oaWRlKCk7CiAgICAgICAgfSwK
  ICAgICAgICBzaG93RXJyb3I6ZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAg
  ICAgICAgbWV0aG9kcy5oaWRlUHJvZ3Jlc3MoKTsKICAgICAgICAgICAgJCgn
  I2Vycm9yQmxvY2snKS5lbXB0eSgpOwogICAgICAgICAgICAkKCcjZXJyb3JC
  bG9jaycpLnByZXBlbmQoJzxwIGNsYXNzPSJlcnJvckZpZWxkIiBpZD0ibG9n
  aW5FcnJvciI+JyArIG1lc3NhZ2UgKyAiPC9wPiIpOwogICAgICAgIH0sCiAg
  ICAgICAgcmVkaXJlY3Q6ZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBtZXNzYWdl
  KSB7CiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7CiAgICAgICAgICAgICAg
  ICAkKCcjaW5mb0Jsb2NrJykuZW1wdHkoKTsKICAgICAgICAgICAgICAgICQo
  JyNpbmZvQmxvY2snKS5wcmVwZW5kKCc8cD4nICsgbWVzc2FnZSArICI8L3A+
  Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJCgnI251bWJlckNvdW50
  ZG93bicpLmhpZGUoKTsKICAgICAgICAgICAgJCgnI2Vycm9yQmxvY2snKS5l
  bXB0eSgpOwogICAgICAgICAgICAkKCcjZm9ybVBheW1lbnQnKS5hdHRyKCdl
  eHBpcmVkJywgJzEnKTsKICAgICAgICAgICAgbWV0aG9kcy5zd2l0Y2hBY3Rp
  b25zKGZhbHNlKTsKICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSBk
  ZXN0aW5hdGlvbjsKICAgICAgICB9LAogICAgICAgIHN0YXJ0Q291bnRkb3du
  OmZ1bmN0aW9uIChyZW1haW5pbmdTZWNzKSB7CiAgICAgICAgICAgICQoZG9j
  dW1lbnQpLm9uZVRpbWUocmVtYWluaW5nU2VjcyAqIDEwMDAsIGZ1bmN0aW9u
  ICgpIHsKICAgICAgICAgICAgICAgICQoJyNmb3JtUGF5bWVudCcpLmF0dHIo
  J2V4cGlyZWQnLCAnMScpOwogICAgICAgICAgICAgICAgbWV0aG9kcy52YWxp
  ZGF0ZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICQoJyNudW1i
  ZXJDb3VudGRvd24nKS5ldmVyeVRpbWUoMTAwMCwgZnVuY3Rpb24gKGkpIHsK
  ICAgICAgICAgICAgICAgIHZhciBzZWNvbmRzTGVmdCA9IHJlbWFpbmluZ1Nl
  Y3MgLSBpOwogICAgICAgICAgICAgICAgdmFyIHR3b0RpZ2l0c1NlY29uZHMg
  PSBzZWNvbmRzTGVmdCAlIDYwOwogICAgICAgICAgICAgICAgaWYgKHR3b0Rp
  Z2l0c1NlY29uZHMgPCAxMCkgewogICAgICAgICAgICAgICAgICAgIHR3b0Rp
  Z2l0c1NlY29uZHMgPSAiMCIgKyB0d29EaWdpdHNTZWNvbmRzOwogICAgICAg
  ICAgICAgICAgfQogICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KHNldHRp
  bmdzLm1lc3NhZ2VUaW1lUmVtYWluaW5nCiAgICAgICAgICAgICAgICAgICAg
  LnJlcGxhY2UoIiNNSU4jIiwgbmV3IFN0cmluZyhNYXRoLmZsb29yKHNlY29u
  ZHNMZWZ0IC8gNjApKSkKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgi
  I1NFQyMiLCBuZXcgU3RyaW5nKHR3b0RpZ2l0c1NlY29uZHMpKSk7CiAgICAg
  ICAgICAgICAgICBpZiAoc2Vjb25kc0xlZnQgPD0gMCkgewogICAgICAgICAg
  ICAgICAgICAgIG1ldGhvZHMuZ2V0U2Vzc2lvblN0YXR1cyhmYWxzZSk7CiAg
  ICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHJlbWFpbmluZ1NlY3Mp
  OwogICAgICAgIH0sCiAgICAgICAgc2V0dXBCaW5kaW5nRm9ybTpmdW5jdGlv
  biAoZGF0YSkgewogICAgICAgICAgICB2YXIgYmluZGluZ0Zvcm0gPSAkKCcj
  Zm9ybUJpbmRpbmcnKTsKICAgICAgICAgICAgdmFyIGJpbmRpbmdJdGVtcyA9
  IGRhdGFbJ2JpbmRpbmdJdGVtcyddOwogICAgICAgICAgICBpZiAoYmluZGlu
  Z0Zvcm0ubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIC8vIFBhZ2Ug
  dGVtcGxhdGUgZG9lcyBub3Qgc3VwcG9ydCBiaW5kaW5ncwogICAgICAgICAg
  ICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0
  eXBlb2YgYmluZGluZ0l0ZW1zID09PSAndW5kZWZpbmVkJykgewogICAgICAg
  ICAgICAgICAgLy8gTm8gYmluZGluZ3MgZm9yIHRoaXMgb3JkZXIKICAgICAg
  ICAgICAgICAgIGJpbmRpbmdGb3JtLmhpZGUoKTsKICAgICAgICAgICAgICAg
  IHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBtZXRob2RzLmNo
  ZWNrQ29udHJvbCgnI2J1dHRvbkJpbmRpbmdQYXltZW50Jyk7CgogICAgICAg
  ICAgICAvLyBCdWlsZCBiaW5kaW5nIHNlbGVjdCBjb250cm9sCiAgICAgICAg
  ICAgIHZhciBiaW5kaW5nU2VsZWN0ID0gYmluZGluZ0Zvcm0uZmluZCgnc2Vs
  ZWN0W25hbWU9YmluZGluZ0lkXScpOwogICAgICAgICAgICBpZiAoYmluZGlu
  Z1NlbGVjdC5sZW5ndGggIT0gMSkgewogICAgICAgICAgICAgICAgYWxlcnQo
  J0JpbmRpbmcgc2VsZWN0b3Igbm90IGZvdW5kJyk7CiAgICAgICAgICAgIH0K
  ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5kaW5nSXRlbXMu
  bGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBvID0gJCgnPG9w
  dGlvbiB2YWx1ZT0iJyArIGJpbmRpbmdJdGVtc1tpXS5pZCArICciPicgKyBi
  aW5kaW5nSXRlbXNbaV0ubGFiZWwgKyAnPC9vcHRpb24+Jyk7CiAgICAgICAg
  ICAgICAgICBiaW5kaW5nU2VsZWN0LmFwcGVuZChvKTsKICAgICAgICAgICAg
  fQoKICAgICAgICAgICAgdmFyIGhpZGRlbk5vZGVzID0gYmluZGluZ0Zvcm0u
  ZmluZCgnLnJic19oaWRkZW4nKTsKICAgICAgICAgICAgYmluZGluZ1NlbGVj
  dC5jaGFuZ2UoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaGlkZGVu
  Tm9kZXMudG9nZ2xlKCQodGhpcykudmFsKCkgIT0gJycpOwogICAgICAgICAg
  ICB9KTsKICAgICAgICAgICAgJCgnI2J1dHRvbkJpbmRpbmdQYXltZW50Jyku
  YmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBi
  aW5kaW5nRm9ybS5zdWJtaXQoKTsKICAgICAgICAgICAgICAgIHJldHVybiBm
  YWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGJpbmRpbmdGb3Jt
  LmJpbmQoJ3N1Ym1pdCcsIG1ldGhvZHMuc2VuZEJpbmRpbmdQYXltZW50KTsK
  CiAgICAgICAgICAgIGJpbmRpbmdGb3JtLnNob3coKTsKICAgICAgICAgICAg
  aGlkZGVuTm9kZXMuaGlkZSgpOwogICAgICAgIH0sCiAgICAgICAgc2VuZEJp
  bmRpbmdQYXltZW50OmZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbWV0aG9k
  cy5zaG93UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgdmFyIG9yZGVySWQgPSBw
  cm9wZXJ0aWVzLm9yZGVySWQ7CiAgICAgICAgICAgIHZhciBiaW5kaW5nRm9y
  bSA9ICQoJyNmb3JtQmluZGluZycpOwogICAgICAgICAgICB2YXIgYWRkUGFy
  YW1zID0gbWV0aG9kcy5nZXRBZGRpdGlvbmFsUGFyYW1zKCdmb3JtQmluZGlu
  ZycpOwogICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgdXJs
  OnNldHRpbmdzLnBheW1lbnRCaW5kaW5nQWN0aW9uLAogICAgICAgICAgICAg
  ICAgdHlwZTonUE9TVCcsCiAgICAgICAgICAgICAgICBjYWNoZTpmYWxzZSwK
  ICAgICAgICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgICAgICAgICdv
  cmRlcklkJzpvcmRlcklkLAogICAgICAgICAgICAgICAgICAgICdiaW5kaW5n
  SWQnOmJpbmRpbmdGb3JtLmZpbmQoJ3NlbGVjdFtuYW1lPWJpbmRpbmdJZF0n
  KS52YWwoKSwKICAgICAgICAgICAgICAgICAgICAnY3ZjJzpiaW5kaW5nRm9y
  bS5maW5kKCdpbnB1dFtuYW1lPWN2Y10nKS52YWwoKSwKICAgICAgICAgICAg
  ICAgICAgICAnZW1haWwnOiQoIiMiICsgc2V0dGluZ3MuZW1haWxJbnB1dElk
  KS52YWwoKSwKICAgICAgICAgICAgICAgICAgICAnanNvblBhcmFtcyc6YWRk
  UGFyYW1zCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0
  YVR5cGU6J2pzb24nLAogICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24g
  KCkgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuc2hvd0Vycm9yKHNl
  dHRpbmdzLm1lc3NhZ2VBamF4RXJyb3IpOwogICAgICAgICAgICAgICAgICAg
  IHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAg
  ICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAg
  ICAgICBtZXRob2RzLmhpZGVQcm9ncmVzcygpOwogICAgICAgICAgICAgICAg
  ICAgIGlmIChkYXRhWydhY3NVcmwnXSAhPSBudWxsKSB7CiAgICAgICAgICAg
  ICAgICAgICAgICAgIG1ldGhvZHMucmVkaXJlY3RUb0FjcyhkYXRhKTsKICAg
  ICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdlcnJvcicgaW4gZGF0YSkg
  ewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzLnNob3dFcnJvcihk
  YXRhWydlcnJvciddKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYg
  KCdyZWRpcmVjdCcgaW4gZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAg
  ICBtZXRob2RzLnJlZGlyZWN0KGRhdGFbJ3JlZGlyZWN0J10sIGRhdGFbJ2lu
  Zm8nXSwgc2V0dGluZ3MubWVzc2FnZVJlZGlyZWN0aW5nKTsKICAgICAgICAg
  ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7
  CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAg
  ICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBnZXRTZXNzaW9u
  U3RhdHVzOmZ1bmN0aW9uIChpbmZvcm1SYnNPbkxvYWQpIHsKICAgICAgICAg
  ICAgbWV0aG9kcy5zaG93UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgdmFyIG9y
  ZGVySWQgPSBwcm9wZXJ0aWVzLm9yZGVySWQ7CiAgICAgICAgICAgICQuYWph
  eCh7CiAgICAgICAgICAgICAgICB1cmw6c2V0dGluZ3MuZ2V0U2Vzc2lvblN0
  YXR1c0FjdGlvbiwKICAgICAgICAgICAgICAgIHR5cGU6J1BPU1QnLAogICAg
  ICAgICAgICAgICAgY2FjaGU6ZmFsc2UsCiAgICAgICAgICAgICAgICBkYXRh
  Oih7CiAgICAgICAgICAgICAgICAgICAgTURPUkRFUjpvcmRlcklkLAogICAg
  ICAgICAgICAgICAgICAgIGxhbmd1YWdlOnNldHRpbmdzLmxhbmd1YWdlLAog
  ICAgICAgICAgICAgICAgICAgIGluZm9ybVJic09uTG9hZDppbmZvcm1SYnNP
  bkxvYWQsCiAgICAgICAgICAgICAgICAgICAgcGFnZVZpZXc6c2V0dGluZ3Mu
  cGFnZVZpZXcKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAg
  ZGF0YVR5cGU6J2pzb24nLAogICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rp
  b24gKCkgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuc2hvd0Vycm9y
  KHNldHRpbmdzLm1lc3NhZ2VBamF4RXJyb3IpOwogICAgICAgICAgICAgICAg
  fSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHsK
  ICAgICAgICAgICAgICAgICAgICBtZXRob2RzLmhpZGVQcm9ncmVzcygpOwog
  ICAgICAgICAgICAgICAgICAgIGlmICgncmVkaXJlY3QnIGluIGRhdGEpIHsK
  ICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5yZWRpcmVjdChkYXRh
  WydyZWRpcmVjdCddLCBzZXR0aW5ncy5tZXNzYWdlUmVkaXJlY3RpbmcpOwog
  ICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNl
  IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdlcnJvcicgaW4gZGF0
  YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5zaG93
  RXJyb3IoZGF0YVsnZXJyb3InXSk7CiAgICAgICAgICAgICAgICAgICAgICAg
  IH0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MudXBkYXRlUGFn
  ZShkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmlu
  Z1NlY3MgPSBkYXRhWydyZW1haW5pbmdTZWNzJ107CiAgICAgICAgICAgICAg
  ICAgICAgICAgIGlmIChyZW1haW5pbmdTZWNzID4gMCkgewogICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgbWV0aG9kcy5zdGFydENvdW50ZG93bihyZW1h
  aW5pbmdTZWNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhv
  ZHMuc2V0dXBCaW5kaW5nRm9ybShkYXRhKTsKICAgICAgICAgICAgICAgICAg
  ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1l
  dGhvZHMucmVkaXJlY3Qoc2V0dGluZ3Muc2hvd0Vycm9yQWN0aW9uICsgJz9w
  YWdlVmlldz0nICsgc2V0dGluZ3MucGFnZVZpZXcsIHNldHRpbmdzLm1lc3Nh
  Z2VSZWRpcmVjdGluZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAg
  ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJu
  IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAg
  ICAgIH0sCiAgICAgICAgaXNNYWVzdHJvQ2FyZDpmdW5jdGlvbiAoKSB7CiAg
  ICAgICAgICAgIGlmIChtZXRob2RzLm1hZXN0cm9DaGVjay5wYW4gIT0gJCgi
  IyIgKyBzZXR0aW5ncy5wYW5JbnB1dElkKS52YWwoKSkgeyAvLyDQktGL0LfQ
  vtCyINC40Lct0LfQsCDQuNC30LzQtdC90LXQvdC40Y8gUEFOLdCwLCDQvdC1
  INC40Lct0LfQsCBzdWJtaXQt0LAuCiAgICAgICAgICAgICAgICAkLmFqYXgo
  ewogICAgICAgICAgICAgICAgICAgIHVybDpzZXR0aW5ncy5pc01hZXN0cm9D
  YXJkQWN0aW9uLAogICAgICAgICAgICAgICAgICAgIHR5cGU6J1BPU1QnLAog
  ICAgICAgICAgICAgICAgICAgIGNhY2hlOmZhbHNlLAogICAgICAgICAgICAg
  ICAgICAgIGRhdGE6KHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFuOiQo
  IiMiICsgc2V0dGluZ3MucGFuSW5wdXRJZCkudmFsKCkKICAgICAgICAgICAg
  ICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTonanNv
  bicsCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24gKCkgewog
  ICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzLnNob3dFcnJvcihzZXR0
  aW5ncy5tZXNzYWdlQWpheEVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9
  LAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEp
  IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdlcnJvcicgaW4gZGF0
  YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5zaG93
  RXJyb3IoZGF0YVsnZXJyb3InXSk7CiAgICAgICAgICAgICAgICAgICAgICAg
  IH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rz
  Lm1hZXN0cm9DaGVjay5wYW4gPSAkKCIjIiArIHNldHRpbmdzLnBhbklucHV0
  SWQpLnZhbCgpOyAvLyDQl9Cw0L/QvtC80L3QuNC8INGA0LXQt9GD0LvRjNGC
  0LDRgiDQstGL0LfQvtCy0LAg0LTQu9GPINC30LDQtNCw0L3QvdC+0LPQviBQ
  QU4t0LAsINGH0YLQvtCx0Ysg0L3QtSDQtNGR0YDQs9Cw0YLRjCBBSkFYINC3
  0YDRjy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHMubWFl
  c3Ryb0NoZWNrLnJlc3VsdCA9IGRhdGFbImlzTWFlc3RybyJdOwogICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSB0cnVlOyAvLyDQ
  kiDQtNCw0L3QvdC+0Lwg0YHQu9GD0YfQsNC1IGlzTWFlc3Ryb0NhcmQoKSDQ
  vdC1INCy0LXRgNC90ZHRgiDQt9C90LDRh9C10L3QuNGPLCDQv9C+0Y3RgtC+
  0LzRgyDQv9GA0L7QstC10LTRkdC8INC+0YHRgtCw0YLQvtC6INCy0LDQu9C4
  0LTQsNGG0LjQuCDQt9C00LXRgdGMLgogICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgaWYgKG1ldGhvZHMubWFlc3Ryb0NoZWNrLnJlc3VsdCkgeyAvLyDQ
  rdGC0L4g0JzQsNGN0YHRgtGA0L4uCiAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgJCgiI2N2Y01lc3NhZ2UiKS5zaG93KCk7CiAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgaWYgKCEoJCgnIycgKyBzZXR0aW5ncy5j
  dmNJbnB1dElkKS52YWwoKSA9PSAiIiB8fCAvXlxkezMsNH0kLy50ZXN0KCQo
  JyMnICsgc2V0dGluZ3MuY3ZjSW5wdXRJZCkudmFsKCkpKSkgeyAvLyBDVkMg
  0LzQvtC20L3QviDQvdC1INC30LDQtNCw0LLQsNGC0YwsINC90L4g0LXRgdC7
  0Lgg0YPQtiDQt9Cw0LTQsNC70LgsINGC0L4g0L7QvSDQtNC+0LvQttC10L0g
  0LHRi9GC0Ywg0L/RgNCw0LLQuNC70YzQvdC+0Lkg0LTQu9C40L3Riy4KICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZh
  bHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcj
  JyArIHNldHRpbmdzLmN2Y0lucHV0SWQgKyAnLXZhbGlkYXRpb24nKS5hdHRy
  KCdjbGFzcycsICdsb2dpbi1pbnZhbGlkJyk7CiAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgJCgnIycgKyBzZXR0aW5ncy5jdmNJbnB1dElkICsg
  Jy12YWxpZGF0aW9uJykuYXR0cignY2xhc3MnLCAnbG9naW4tdmFsaWQnKTsK
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyDQrdGC0L4g0L3QtSDQnNCw
  0Y3RgdGC0YDQviAtINC/0YDQvtCy0LXRgNC40Lwg0LTQu9C40L3RgyBDVkMg
  0LrQsNC6INC+0LHRi9GH0L3Qvi4KICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAkKCIjY3ZjTWVzc2FnZSIpLmhpZGUoKTsKICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICBpZiAoIS9eXGR7Myw0fSQvLnRlc3QoJCgn
  IycgKyBzZXR0aW5ncy5jdmNJbnB1dElkKS52YWwoKSkpIHsKICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOwog
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIHNl
  dHRpbmdzLmN2Y0lucHV0SWQgKyAnLXZhbGlkYXRpb24nKS5hdHRyKCdjbGFz
  cycsICdsb2dpbi1pbnZhbGlkJyk7CiAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgJCgnIycgKyBzZXR0aW5ncy5jdmNJbnB1dElkICsgJy12YWxp
  ZGF0aW9uJykuYXR0cignY2xhc3MnLCAnbG9naW4tdmFsaWQnKTsKICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRo
  b2RzLnN3aXRjaEFjdGlvbnMoaXNWYWxpZCk7IC8vINCS0LrQu9GO0YfQuNC8
  INC40LvQuCDQstGL0LrQu9GO0YfQuNC8INC60L3QvtC/0LrRgyAi0J7Qv9C7
  0LDRgtC40YLRjCIuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg
  ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAg
  ICAgICAgIHJldHVybjsgLy8g0KIu0LouIG1ldGhvZHMubWFlc3Ryb0NoZWNr
  LnJlc3VsdCDQstGB0ZEg0YDQsNCy0L3QviDQvdC1INGD0YHQv9C10LXRgiDQ
  vtCx0L3QvtCy0LjRgtGM0YHRjywg0LAg0YDQtdC30YPQu9GM0YLQsNGCINCy
  0YvQt9C+0LLQsCDRhNGD0L3QutGG0LjQuCB2YWxpZGF0ZSgpINGB0LXQudGH
  0LDRgSDQvdC1INC90YPQttC10L0sINGCLtC6LiDRjdGC0L4g0L3QtSBzdWJt
  aXQuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMu
  bWFlc3Ryb0NoZWNrLnJlc3VsdDsgLy8g0JLRi9C30L7QsiDQvdC1INC40Lct
  0LfQsCDQuNC30LzQtdC90LXQvdC40Y8gUEFOLdCwIC0gc3VibWl0INC40LvQ
  uCDQuNC30LzQtdC90LXQvdC40LUg0LTRgNGD0LPQvtCz0L4g0L/QvtC70Y8u
  INCV0YHQu9C4INGN0YLQviBzdWJtaXQg0YDQtdC30YPQu9GM0YLQsNGCINC/
  0YDQuNCz0L7QtNC40YLRgdGPLgogICAgICAgIH0sCiAgICAgICAgc2VuZFBh
  eW1lbnQ6ZnVuY3Rpb24gKCkgewogICAgICAgICAgICBtZXRob2RzLnNob3dQ
  cm9ncmVzcygpOwogICAgICAgICAgICB2YXIgb3JkZXJJZCA9IHByb3BlcnRp
  ZXMub3JkZXJJZDsKICAgICAgICAgICAgdmFyIGFkZFBhcmFtcyA9IG1ldGhv
  ZHMuZ2V0QWRkaXRpb25hbFBhcmFtcyhzZXR0aW5ncy5wYXltZW50Rm9ybUlk
  KTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDpz
  ZXR0aW5ncy5wYXltZW50QWN0aW9uLAogICAgICAgICAgICAgICAgdHlwZTon
  UE9TVCcsCiAgICAgICAgICAgICAgICBjYWNoZTpmYWxzZSwKICAgICAgICAg
  ICAgICAgIGRhdGE6KHsKICAgICAgICAgICAgICAgICAgICBNRE9SREVSOm9y
  ZGVySWQsCiAgICAgICAgICAgICAgICAgICAgJEVYUElSWTokKCIjZXhwaXJ5
  IikuYXR0cigidmFsdWUiKSwKICAgICAgICAgICAgICAgICAgICAkUEFOOiQo
  IiMiICsgc2V0dGluZ3MucGFuSW5wdXRJZCkudmFsKCksCiAgICAgICAgICAg
  ICAgICAgICAgTU06JCgiIyIgKyBzZXR0aW5ncy5tb250aFNlbGVjdElkKS52
  YWwoKSwKICAgICAgICAgICAgICAgICAgICBZWVlZOiQoIiMiICsgc2V0dGlu
  Z3MueWVhclNlbGVjdElkKS52YWwoKSwKICAgICAgICAgICAgICAgICAgICBU
  RVhUOiQoIiMiICsgc2V0dGluZ3MuY2FyZGhvbGRlcklucHV0SWQpLnZhbCgp
  LAogICAgICAgICAgICAgICAgICAgICRDVkM6JCgiIyIgKyBzZXR0aW5ncy5j
  dmNJbnB1dElkKS52YWwoKSwKICAgICAgICAgICAgICAgICAgICBsYW5ndWFn
  ZTpzZXR0aW5ncy5sYW5ndWFnZSwKICAgICAgICAgICAgICAgICAgICBlbWFp
  bDokKCIjIiArIHNldHRpbmdzLmVtYWlsSW5wdXRJZCkudmFsKCksCiAgICAg
  ICAgICAgICAgICAgICAganNvblBhcmFtczphZGRQYXJhbXMKICAgICAgICAg
  ICAgICAgIH0pLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6J2pzb24nLAog
  ICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24gKCkgewogICAgICAgICAg
  ICAgICAgICAgIG1ldGhvZHMuc2hvd0Vycm9yKHNldHRpbmdzLm1lc3NhZ2VB
  amF4RXJyb3IpOwogICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuc3dpdGNo
  QWN0aW9ucyh0cnVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1
  ZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNz
  OmZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9k
  cy5oaWRlUHJvZ3Jlc3MoKTsKICAgICAgICAgICAgICAgICAgICBtZXRob2Rz
  LnN3aXRjaEFjdGlvbnModHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYg
  KGRhdGFbJ2Fjc1VybCddICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAg
  ICAgICAgbWV0aG9kcy5yZWRpcmVjdFRvQWNzKGRhdGEpOwogICAgICAgICAg
  ICAgICAgICAgIH0gZWxzZSBpZiAoJ2Vycm9yJyBpbiBkYXRhKSB7CiAgICAg
  ICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuc2hvd0Vycm9yKGRhdGFbJ2Vy
  cm9yJ10pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3JlZGly
  ZWN0JyBpbiBkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhv
  ZHMucmVkaXJlY3QoZGF0YVsncmVkaXJlY3QnXSwgZGF0YVsnaW5mbyddLCBz
  ZXR0aW5ncy5tZXNzYWdlUmVkaXJlY3RpbmcpOwogICAgICAgICAgICAgICAg
  ICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg
  ICAgICAgICAgIH0KCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAg
  ICAgIGdldEFkZGl0aW9uYWxQYXJhbXM6ZnVuY3Rpb24gKHBheW1lbnRGb3Jt
  SWQpIHsKICAgICAgICAgICAgdmFyIGpzb25QYXJhbXMgPSAneyc7CiAgICAg
  ICAgICAgICQoIiMiICsgcGF5bWVudEZvcm1JZCArICIgaW5wdXRbbmFtZSo9
  JyIgKyBzZXR0aW5ncy5wYXJhbVByZWZpeCArICInXSIpLmVhY2goZnVuY3Rp
  b24gKGluZGV4LCBlbGVtZW50KSB7CiAgICAgICAgICAgICAgICBqc29uUGFy
  YW1zICs9ICciJyArIGVsZW1lbnQuaWQuc3Vic3RyaW5nKHNldHRpbmdzLnBh
  cmFtUHJlZml4Lmxlbmd0aCkgKyAnIjoiJyArIGVsZW1lbnQudmFsdWUgKyAn
  IiwnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoanNvblBhcmFt
  cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICBqc29uUGFyYW1zID0g
  anNvblBhcmFtcy5zdWJzdHIoMCwganNvblBhcmFtcy5sZW5ndGggLSAxKTsK
  ICAgICAgICAgICAgfQogICAgICAgICAgICBqc29uUGFyYW1zICs9ICJ9IjsK
  ICAgICAgICAgICAgcmV0dXJuIGpzb25QYXJhbXM7CiAgICAgICAgfSwKCiAg
  ICAgICAgc2VuZFBheW1lbnRTYnJmOmZ1bmN0aW9uICgpIHsKICAgICAgICAg
  ICAgbWV0aG9kcy5zaG93UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgdmFyIG9y
  ZGVySWQgPSBwcm9wZXJ0aWVzLm9yZGVySWQ7CiAgICAgICAgICAgICQuYWph
  eCh7CiAgICAgICAgICAgICAgICB1cmw6c2V0dGluZ3MucGF5bWVudEFjdGlv
  biwKICAgICAgICAgICAgICAgIHR5cGU6J1BPU1QnLAogICAgICAgICAgICAg
  ICAgY2FjaGU6ZmFsc2UsCiAgICAgICAgICAgICAgICBkYXRhOih7CiAgICAg
  ICAgICAgICAgICAgICAgTURPUkRFUjpvcmRlcklkLAogICAgICAgICAgICAg
  ICAgICAgIHBheW1lbnRXYXk6J1NCUkZfU0JPTCcKICAgICAgICAgICAgICAg
  IH0pLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6J2pzb24nLAogICAgICAg
  ICAgICAgICAgZXJyb3I6ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAg
  ICAgIG1ldGhvZHMuc2hvd0Vycm9yKHNldHRpbmdzLm1lc3NhZ2VBamF4RXJy
  b3IpOwogICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuc3dpdGNoQWN0aW9u
  cyh0cnVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg
  ICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0
  aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5oaWRl
  UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgICAgICAgICBtZXRob2RzLnN3aXRj
  aEFjdGlvbnModHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFb
  J2Fjc1VybCddICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAg
  bWV0aG9kcy5yZWRpcmVjdFRvQWNzKGRhdGEpOwogICAgICAgICAgICAgICAg
  ICAgIH0gZWxzZSBpZiAoJ2Vycm9yJyBpbiBkYXRhKSB7CiAgICAgICAgICAg
  ICAgICAgICAgICAgIG1ldGhvZHMuc2hvd0Vycm9yKGRhdGFbJ2Vycm9yJ10p
  OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3JlZGlyZWN0JyBp
  biBkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHMucmVk
  aXJlY3QoZGF0YVsncmVkaXJlY3QnXSwgZGF0YVsnaW5mbyddLCBzZXR0aW5n
  cy5tZXNzYWdlUmVkaXJlY3RpbmcpOwogICAgICAgICAgICAgICAgICAgIH0K
  ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAg
  ICAgIH0KCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgcmVk
  aXJlY3RUb0FjczpmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAkKCcj
  YWNzJykuYXR0cignYWN0aW9uJywgZGF0YVsnYWNzVXJsJ10pOwogICAgICAg
  ICAgICAkKCcjUGFSZXEnKS52YWwoZGF0YVsncGFSZXEnXSk7CiAgICAgICAg
  ICAgICQoJyNNRCcpLnZhbChwcm9wZXJ0aWVzLm9yZGVySWQpOwogICAgICAg
  ICAgICAkKCcjVGVybVVybCcpLnZhbChkYXRhWyd0ZXJtVXJsJ10pOwogICAg
  ICAgICAgICAkKCcjYWNzJykuc3VibWl0KCk7CiAgICAgICAgfQogICAgfTsK
  CiAgICAkLmZuLnBheW1lbnQgPSBmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAg
  ICAgLy8gTWV0aG9kIGNhbGxpbmcgbG9naWMKICAgICAgICBpZiAobWV0aG9k
  c1ttZXRob2RdKSB7CiAgICAgICAgICAgIHJldHVybiBtZXRob2RzWyBtZXRo
  b2QgXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChh
  cmd1bWVudHMsIDEpKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRo
  b2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHsKICAgICAgICAgICAgcmV0
  dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAg
  ICAgIH0gZWxzZSB7CiAgICAgICAgICAgICQuZXJyb3IoJ01ldGhvZCAnICsg
  bWV0aG9kICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkucGF5bWVudCcp
  OwogICAgICAgIH0KICAgIH07Cn0pKGpRdWVyeSk7CgpqUXVlcnkuZm4ubG9n
  ID0gZnVuY3Rpb24gKG1zZywgdHlwZSkgewogICAgaWYgKHR5cGVvZiBsYXN0
  U2VsZWN0b3IgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBsYXN0U2VsZWN0
  b3IgPSAnLS0nOwogICAgfQoKICAgIGlmIChsYXN0U2VsZWN0b3IgIT0gdGhp
  cy5zZWxlY3Rvci5zbGljZSgwLCBsYXN0U2VsZWN0b3IubGVuZ3RoKSkgewog
  ICAgICAgIGlmIChsYXN0U2VsZWN0b3IgIT0gJy0tJykgewogICAgICAgICAg
  ICBjb25zb2xlLmdyb3VwRW5kKCk7CiAgICAgICAgICAgIGxhc3RTZWxlY3Rv
  ciA9ICctLSc7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAg
  ICBsYXN0U2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yOwogICAgICAgIH0KICAg
  ICAgICBjb25zb2xlLmdyb3VwKCIlcyAoJXMpIiwgbXNnLCB0aGlzLnNlbGVj
  dG9yKTsKICAgIH0KCiAgICBpZiAodHlwZSA9PSB1bmRlZmluZWQpIHsKICAg
  ICAgICB0eXBlID0gImxvZyI7CiAgICB9CiAgICBzd2l0Y2ggKHR5cGUpIHsK
  ICAgICAgICBjYXNlICJsb2ciOgogICAgICAgICAgICBjb25zb2xlLmxvZyh0
  aGlzKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAid2FybiI6
  CiAgICAgICAgICAgIGNvbnNvbGUud2Fybih0aGlzKTsKICAgICAgICAgICAg
  YnJlYWs7CiAgICAgICAgY2FzZSAiaW5mbyI6CiAgICAgICAgICAgIGNvbnNv
  bGUuaW5mbyh0aGlzKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2Fz
  ZSAiZXJyb3IiOgogICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMpOwog
  ICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJ0aW1lIjoKICAgICAg
  ICAgICAgY29uc29sZS50aW1lKG1zZyk7CiAgICAgICAgICAgIGJyZWFrOwog
  ICAgICAgIGNhc2UgInRpbWVzdG9wIjoKICAgICAgICAgICAgY29uc29sZS50
  aW1lRW5kKG1zZyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2Ug
  InByb2ZpbGUiOgogICAgICAgICAgICBjb25zb2xlLnByb2ZpbGUobXNnKTsK
  ICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicHJvZmlsZXN0b3Ai
  OgogICAgICAgICAgICBjb25zb2xlLnByb2ZpbGVFbmQobXNnKTsKICAgICAg
  ICAgICAgYnJlYWs7CiAgICB9CiAgICByZXR1cm4gdGhpczsKfTsKCi8qKgog
  KiBJcyBwcmVzc2VkIGtleSBhIG51bWJlciBrZXkKICogQHBhcmFtIGtleUNv
  ZGUKICovCmZ1bmN0aW9uIGlzTnVtYmVyKGtleUNvZGUpIHsKICAgIHJldHVy
  biAoIGtleUNvZGUgPiA0NyAmJiBrZXlDb2RlIDwgNTggKTsKfQoKZnVuY3Rp
  b24gaXNDb250cm9sKGtleUNvZGUpIHsKICAgIHJldHVybiBrZXlDb2RlIGlu
  IHs4OjEsIDk6MSwgMTM6MSwgMTY6MSwgMTc6MSwgMTg6MSwgMjA6MSwgMzc6
  MSwgMzg6MSwgMzk6MSwgNDA6MSwgNDU6MSwgNDY6MX07Cn0KCmZ1bmN0aW9u
  IGlzQ2hhcihrZXlDb2RlKSB7CiAgICByZXR1cm4gKCBrZXlDb2RlID4gOTYg
  JiYga2V5Q29kZSA8IDEzMyApIHx8IChrZXlDb2RlID4gNjQgJiYga2V5Q29k
  ZSA8IDkxKTsKfQoKZnVuY3Rpb24gaXNTcGFjZShrZXlDb2RlKSB7CiAgICBy
  ZXR1cm4ga2V5Q29kZSA9PQogICAgICAgIDMyOwp9CgpmdW5jdGlvbiBpc0Rv
  dChrZXlDb2RlKSB7CiAgICByZXR1cm4ga2V5Q29kZSA9PSA0NiB8fCBrZXlD
  b2RlID09IDM5Owp9CgpmdW5jdGlvbiBsdWhuKG51bSkgewogICAgbnVtID0g
  KG51bSArICcnKS5yZXBsYWNlKC9cRCsvZywgJycpLnNwbGl0KCcnKS5yZXZl
  cnNlKCk7CiAgICBpZiAoIW51bS5sZW5ndGgpCiAgICAgICAgcmV0dXJuIGZh
  bHNlOwogICAgdmFyIHRvdGFsID0gMCwgaTsKICAgIGZvciAoaSA9IDA7IGkg
  PCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICBudW1baV0gPSBwYXJzZUlu
  dChudW1baV0pOwogICAgICAgIHRvdGFsICs9IGkgJSAyID8gMiAqIG51bVtp
  XSAtIChudW1baV0gPiA0ID8gOSA6IDApIDogbnVtW2ldOwogICAgfQogICAg
  cmV0dXJuICh0b3RhbCAlIDEwKSA9PSAwOwp9Cg==
